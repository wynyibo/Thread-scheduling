<div align="center"><h1><b><font size=7>会议记录</font></b></h1></div>
<div align="center"><font size=5>2024 年全国大学生计算机系统能力大赛操作系统设计赛——功能赛道</font></div>
<div align="center"><font size=5>赛题选择：[proj317--efficient-user-level-threads-scheduling-and-mapping]</font></div>
<div align="center"><font size=5>队伍名称：大企鹅</font></div>
<div align="center"><font size=5>队员姓名：高怡香、王月妮、刘冰</font></div>
<div align="center"><font size=5>指导教师：陈莉君教授、谢瑞莲老师</font></div>
<div align="center"><font size=5>项目导师：任玉鑫、吴一凡</font></div>
<div align="center"><font size=5>学校名称：西安邮电大学</font></div>

---
[TOC]


## 会议记录总结

### 会议记录 4.10

会议目的：确定选题

会议内容：根据我们自身对Linux操作系统的熟悉程度和擅长领域，于是我们选择了与调度相关的题目，即`proj317--efficient-user-level-threads-scheduling-and-mapping`这一赛题

下一步计划：刘冰，高怡香、王月妮进行项目采用的技术调研，并与项目导师取得联系。

### 会议记录 4.15

会议目的：确定开发技术

会议内容：跟项目导师第一次开会，我们也介绍了自己擅长的技术以及对于openMP的学习，导师说让尽可能去了解一下openMP。也大致和我们讨论了一下这个题目可以做的方向，第一是使用openMP进行用户态调度。第二是使用eBPF拿取内核数据并结合内核调度。

下一步计划：刘冰，高怡香、王月妮学习openMP，高怡香、王月妮学习内核态调度策略相关源码

### 会议记录 4.20

会议目的：讨论结合eBPF实现

会议内容：根据上次老师开会所提的结合eBPF，我们考虑自身有相关开发经验，于是想着结合eBPF来实现缩短任务运行时间，我们的初步想法是用eBPF在内核中提取当前进程的相关运行数据，通过一个量化任务量大小的算法，然后在用户空间锁核（防止迁移）以及确定线程数（openMP实现），从而提高系统性能。导师给的建议是调研论文，并确定一下要提取哪些指标

下一步计划：高怡香和王月妮确定提取哪些指标，刘冰确定相关算法

### 会议记录 4.25

会议目的：汇总调研结果

会议内容：通过调研相关论文，我们获取的指标有：CPU利用率（可以加上CPU负载）、锁争用程度、上下文切换率（通过检测switch_to函数）及迁移率。并且分析了论文中的线程类型，大概有4类，分别是内存密集型、 高锁争用程序、 CPU密集型及IO密集型。但我们也和师兄他们讨论过，这个量化的精度越高越好，但越高的话需要考虑的因素就越多。

下一步计划：继续确定相关算法，调研论文。看是否能找到一个折中的思路

### 会议记录 5.4

会议目的：尝试换个方向

会议内容：由于题目方向比较大，所以我们刚开始需要确定一个入手点，本次会议我们和老师再次讨论了我们要优化的点，是确定最优线程数。因为这个openMP是可以进行动态设置线程数的。老师提出的意见是调研相关论文看看其他论文是怎么实现的。

下一步计划：高怡香和王月妮分别调研相关确定最优线程数的论文，具体看看最优线程数如何实现

### 会议记录 5.10

会议目的：确定新的方向

会议内容：本次会议讨论内容明确新方向，在大量数据处理和CPU密集型任务的场景下，需要对任务支持的粒度更加细化，实现用户态下的任务调度框架去优化CPU利用率，减少由于大量线程导致内核中任务频繁切换所带来的开销。提高cpu利用率考虑：抢占机制、高精度定时器、任务亲和性三个方面。

下一步计划：高怡香和王月妮进行调研，明确我们要实现的用户态调度框架实际应用场景、当前存在的问题、造成的影响。

### 会议记录 5.20

会议目的：解决在项目开发中遇到的问题

会议内容：我们开始着手实现，在项目开发的过程中，我们遇到种种问题，本次会议中就这些问题进行讨论、交流学习，并提出了相对的解决方案，问题主要分别以下几类：实现信号模拟中断过程中无法触发中断、段错误、运行过程中的错误。通过本次会议，我们解决了许多问题，极大的提高了开发效率。

下一步计划：刘冰负责实现引入抢占机制，高怡香和王月妮实现高精度定时器、任务运行时间测试。

### 会议记录 5.25

会议目的：汇报项目进度

会议内容：实现了类协程的任务调度，包括初始化主任务，创建任务，任务调度及任务退出，使用SIGALARM信号进行调度。并实现了在一个多任务操作系统环境中模拟创建并运行不同类型的任务，并统计整个任务执行的总时间。汇报撰写的区域赛技术报告。

下一步计划：继续进行相关资料的调研，适用的场景、绑核功能以及横向扩展。

### 会议记录 6.2

会议目的：整理项目代码，并探索阶段性技术报告中列举的待实现项

会议内容：讨论了有关于信号实现的不足之处，在讨论信号处理流程之后，发现每个时钟信号都会到达用户态，这会导致大量用户态-内核态切换

下一步计划：探索如何减少触发信号处理的次数。


### 会议记录 6.10

会议目的：有关减少触发信号处理次数的解决方案

会议内容：讨论了两个方案：第一，优化信号处理逻辑，确保信号处理函数中的逻辑尽可能高效。第二，使用定时器来周期性检查是否有信号需要处理。最终我们决定采用前一种方法来实现

下一步计划：学习信号处理这部分的代码，想办法如何去优化


### 会议记录 6.18

会议目的：优化信号处理逻辑

会议内容：在仔细学习了这部分相关代码，发现在信号处理的回调函数种不仅进行了调度切换，而且进行了任务的时间片统计。
下一步计划：使用ebpf技术实现将调度和计时进行分离。从而减少用户态到内核态的切换


### 会议记录 6.24

会议目的：汇报使用eBPF 阻塞指定的进程
会议内容：通过 ebpf 的接口实现发送信号，阻塞信号，替换原有的信号这一套逻辑，但在调研的过程中发现行不通。                              

下一步计划：学习内核模块相关内容，实现上述功能


### 会议记录 6.30

会议目的：汇报使用内核模块来阻塞指定的进程

会议内容：通过内核模块实现发送信号，并阻塞指定的信号功能中，对于挂载函数的选取，我们首先选择的是 schedule，但挂载不成功。最终选取了挂载函数 sched_switch ，确保知道下一个要切换运行的进程信息使用内核模块来阻塞指定的进程。给即将要切换的进程发送自定义信号

下一步计划：完成计时和调度分离


### 会议记录 7.7

会议目的：完成调度和计时的分离

会议内容：确保在内核态进行任务时间片的计算，每一次钩子函数（sched_switch）执行完之后tick减一，判断是否为0，不为0直接返回就行，为0则发信号，在内核态只进行调度。

下一步计划：完成之后，发现不能正确输出，只能输出第一个进程的信息。


### 会议记录 7.13

会议目的：解决只能输出第一个进程的信息

会议内容：在对信号处理回调函数进行仔细研究后，发现问题所在。在调度之前应当先启动定时器，因为整个项目是采用定时器来做任务切换时钟的。所以在信号的回调函数中添加了启动定时器的代码，发现成功

下一步计划：继续进行相关资料的调研，适用的场景、绑核功能以及横向扩展。

### 会议记录 7.18

会议目的：调研有关调度的相关大模型

会议内容：通过论文以及网上其他资源先后研究了百度Apollo 以及 ROS2 框架，想办法把 User_schedule 应用到大模型中，在调研过程中，由于电脑配置，我们选择应用 User_schedule 在ROS2 模型上

下一步计划：学习ROS2 模型的框架，并进行应用

### 会议记录 7.25

会议目的：应用 ROS2 大模型

会议内容：将User_schedule 作为 ROS2模型中的中间件，去提供任务创建等相关接口。除此，调研了测试 User_schedule 的相关指标以及测试方法。即和其他调度框架进行对比，对比的指标选取了cpu利用率以及内存利用率

下一步计划：写测试 User_schedule 的代码及相关文档
### 会议记录 7.27

会议目的：提交学习资料并撰写os大赛相关文档

会议内容：对各自实现的部分代码进行整理，并在测试无误后提交至仓库。接下来确定在初赛文档的基础上需要撰写的文档：有技术调研、结项文档。团队成员进行分工撰写os大赛相关文档

下一步计划：完善项目，检查提交的代码内容，撰写os大赛相关文档。


### 会议记录 7.30

会议目的：梳理项目，查缺补漏

会议内容：目前已经撰写完毕有关操作系统大赛相关的文档，接下来大家分工去梳理自己撰写部分的文档，查缺补漏，比如错别字、符号错误等。
下一步计划：提交gitlab地址，并结合ebpf发信号这一展望进行实现